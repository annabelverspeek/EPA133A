import pandas as pd
import matplotlib.pyplot as plt

vulnerability_file = '../data/processed/Vulnerability100.csv'
vulnerability_df = pd.read_csv(vulnerability_file)

# criticality_file = '../data/processed/criticality100.csv'
# criticality_df = pd.read_csv(criticaltiy_file)

vulnerability_df['score_x'] = vulnerability_df.index
# print('vulnerability_df',vulnerability_df)

criticality_df['score_y'] = criticality_df.index

merged_df = pd.merge(vulnerability_df, criticality_df, on='segments')

merged_df['total_score']= merged_df['score_x'] + merged_df['score_y']

merged_df.sort_values(by='total_score', ascending=False, inplace=True)

merged_df_top10 = merged_df.head(10)

plt.figure(figsize=(10, 6))
plt.barh(merged_df_top10['segments'], merged_df_top10['score'], color='red')
plt.xlabel('Vulnerability and criticality of Roads')
plt.ylabel('Road Names')
plt.title(f'Top 10 Roads by Vulnerability and criticality')
plt.gca().invert_yaxis()  # Invert y-axis to display the highest-ranking road at the top
plt.show()